foreign_politics = {

	CHI_sue_for_peace_JAP = {

		available = {
			NOT = {
				OR = {
					has_idea = CHI_sunfall_sea
					has_idea = CHI_arc
				}
			}
			FROM = {
				surrender_progress < 0.2 # if they are losing, lets not allow it
			}
			custom_trigger_tooltip = {
				tooltip = JAP_sue_for_peace_TT
				NOT = {
					controls_state = 525
					controls_state = 527
				}
				NOT = {
					any_state = {
						is_owned_by = ROOT
						is_core_of = CHI
						NOT = {
							state = 524
						}
						OR = {
							is_controlled_by = JAP
							AND = {
								is_controlled_by = ECA
								ECA = { is_subject_of = JAP }
							}
							AND = {
								is_controlled_by = MAN
								MAN = { is_subject_of = JAP }
							}
						}
					}
				}
				MAN = {
					OR = {
						exists = no
						NOT = {
							is_subject_of = JAP
						}
						has_capitulated = yes
					}
				}
			}
		}

		target_trigger = {
			#Target is FROM
			FROM = {
				tag = JAP
			}
		}

		visible = {
			is_legit_china = yes
			has_war_with = JAP
		}

		cost = 0

		fire_only_once = yes

		ai_will_do = {
			factor = 400
		}

		complete_effect = {
			event_target:WTT_current_china_leader = {
				country_event = {
					id = rcmchina.282
				}
			}
		}
	}
	###########
}
socialism_on_the_rise = {
	prepare_for_socialist_civil_war = {

		icon = generic_prepare_civil_war

		available = {
			n_socialism > 0.1
		}

		visible = {
			NOT = { has_country_flag = preparation_for_n_socialism_civil_war }
			has_idea_with_trait = socialist_idealist
			check_has_focus_tree_to_switch_to_n_socialism = yes
			NOT = { has_government = n_socialism }
		}

		fire_only_once = yes

		cost = 50

		complete_effect = {
			set_country_flag = preparation_for_socialist_civil_war
		}

		ai_will_do = {
			factor = 0
		}
	}

	expand_civil_socialist_support = {

		icon = generic_civil_support

		visible = {
			OR = {
				has_country_flag = preparation_for_socialist_civil_war
				has_country_flag = open_up_political_discourse_n_socialism
			}
			has_idea_with_trait = socialist_idealist
			check_has_focus_tree_to_switch_to_n_socialism = yes
			NOT = { has_government = n_socialism }
		}

		fire_only_once = no

		cost = 25

		days_remove = 30

		modifier = {
			n_socialism_drift = 0.02
			stability_weekly = -0.03
			political_power_gain = -0.2
		}

		ai_will_do = {
			factor = 1
		}
	}

	army_support_for_socialist_civil_war = {

		icon = generic_army_support

		visible = {
			has_country_flag = preparation_for_socialist_civil_war
			has_idea_with_trait = socialist_idealist
			check_has_focus_tree_to_switch_to_n_socialism = yes
			NOT = { has_government = n_socialism }
		}

		fire_only_once = no

		cost = 50

		days_remove = 30

		modifier = {
			command_power_gain = -0.02
		}

		remove_effect = {
			if = {
				limit = {
					check_variable = { var = army_support_var value = 0.1 compare = less_than }
				}
				set_variable = { var = army_support_var value = 0.1 }
			}
			if = {
				limit = {
					check_variable = { var = army_support_var value = 0.1 compare = greater_than_or_equals }
				}
				add_to_variable = { var = army_support_var value = 0.1 }
			}
			set_country_flag = military_support_for_socialist_civil_war
		}

		complete_effect = {
		}

		ai_will_do = {
			factor = 0
		}
	}

	ensure_general_loyalty_for_socialist_civil_war = {

		icon = generic_army_support

		available = {
			has_country_flag = military_support_for_socialist_civil_war
			command_power > 2
		}

		visible = {
			has_country_flag = preparation_for_socialist_civil_war
			has_idea_with_trait = socialist_idealist
			any_army_leader = {
				is_field_marshal = no
				NOT = { has_trait = hidden_sympathies }
			}
			check_has_focus_tree_to_switch_to_n_socialism = yes
			NOT = { has_government = n_socialism }
		}

		fire_only_once = yes

		cost = 50

		complete_effect = {
			country_event = { id = decisions.1 }
		}

		ai_will_do = {
			factor = 0
		}
	}

	ensure_marshal_loyalty_for_socialist_civil_war = {

		icon = generic_army_support

		available = {
			has_country_flag = military_support_for_socialist_civil_war
			command_power > 2
		}

		visible = {
			has_country_flag = preparation_for_socialist_civil_war
			has_idea_with_trait = socialist_idealist
			any_army_leader = {
				NOT = { has_trait = hidden_sympathies }
			}
			check_has_focus_tree_to_switch_to_n_socialism = yes
			NOT = { has_government = n_socialism }
			any_army_leader = {
				is_field_marshal = yes
				NOT = { has_unit_leader_flag = hidden_sympathies_marshal }
			}
		}

		fire_only_once = yes

		cost = 50

		complete_effect = {
			country_event = { id = decisions.2 }
		}

		ai_will_do = {
			factor = 0
		}
	}

	siphon_equipment_stockpiles_for_socialist_civil_war = {

		icon = generic_prepare_civil_war

		available = {
			has_country_flag = military_support_for_socialist_civil_war
			has_equipment = { infantry_equipment > 1000 }
			command_power > 2
		}

		visible = {
			has_country_flag = preparation_for_socialist_civil_war
			has_country_flag = military_support_for_socialist_civil_war
			has_idea_with_trait = socialist_idealist
			check_has_focus_tree_to_switch_to_n_socialism = yes
			NOT = { has_government = n_socialism }
		}

		fire_only_once = no

		cost = 50

		complete_effect = {
			add_command_power = -2
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = -1000
			}
			set_country_flag = siphoned_equipment_stockpiles_for_civil_war
		}

		ai_will_do = {
			factor = 0
		}
	}

	formulate_surprise_attack_plan_for_socialist_civil_war = {

		icon = generic_army_support

		available = {
			has_country_flag = military_support_for_socialist_civil_war
			command_power > 2
		}

		visible = {
			has_country_flag = preparation_for_socialist_civil_war
			has_idea_with_trait = socialist_idealist
			check_has_focus_tree_to_switch_to_n_socialism = yes
			NOT = { has_government = n_socialism }
		}

		fire_only_once = yes

		cost = 50

		complete_effect = {
			add_command_power = -2
			custom_effect_tooltip = formulate_surprise_attack_plan_for_civil_war_tt
			set_country_flag = formulated_surprise_attack_plan_for_civil_war
		}

		ai_will_do = {
			factor = 0
		}
	}

	ignite_the_socialist_civil_war = {

		icon = generic_ignite_civil_war

		available = {
			has_stability < 0.5
		}

		visible = {
			has_country_flag = preparation_for_socialist_civil_war
			has_idea_with_trait = socialist_idealist
			check_has_focus_tree_to_switch_to_n_socialism = yes
			NOT = { has_government = n_socialism }
		}

		fire_only_once = yes

		cost = 50

		complete_effect = {
			if = {
				limit = {
					has_government = fascism
				}
				set_variable = {
					var = civil_war_size_var
					value = party_popularity@fascism
				}
			}
			if = {
				limit = {
					has_government = democratic
				}
				set_variable = {
					var = civil_war_size_var
					value = party_popularity@democratic
				}
			}
			if = {
				limit = {
					has_government = neutrality
				}
				set_variable = {
					var = civil_war_size_var
					value = party_popularity@neutrality
				}
			}
			if = {
				limit = {
					has_government = communism
				}
				set_variable = {
					var = civil_war_size_var
					value = party_popularity@communism
				}
			}
			subtract_from_variable = {
				var = civil_war_size_var
				value = army_support_var
			}
			if = {
				limit = {
					check_variable = {
						var = civil_war_size_var
						value = 0.3
						compare = less_than
					}
				}
				set_variable = {
					var = civil_war_size_var
					value = 0.3
				}
			}
			start_civil_war = {
				ruling_party = n_socialism
				ideology = ROOT
				size = civil_war_size_var
				keep_unit_leaders_trigger = {
					has_trait = hidden_sympathies
				}
			}
			clr_country_flag = preparation_for_socialist_civil_war
			clr_country_flag = military_support_for_socialist_civil_war
			clr_country_flag = civil_support_for_socialist_civil_war
		}

		ai_will_do = {
			factor = 0
		}
	}

	rebuild_the_nation_n_socialism = {

		icon = generic_construction

		visible = {
			has_country_flag = won_ideology_civil_war
		}

		fire_only_once = yes

		cost = 25

		days_remove = 365

		modifier = {
			political_power_gain = -1
			industry_repair_factor = 0.20
			production_speed_industrial_complex_factor = 0.1
			production_speed_infrastructure_factor = 0.1
			industrial_capacity_factory = 0.1
			industrial_capacity_dockyard = 0.1
		}

		ai_will_do = {
			factor = 200
		}
	}

	open_up_political_discourse_socialist = {

		icon = generic_construction

		available = {
			fascism < 0.9
			democratic < 0.9
			communism < 0.9
			n_socialism < 0.9
			neutrality < 0.9
		}

		visible = {
			has_idea_with_trait = socialist_idealist
			check_has_focus_tree_to_switch_to_n_socialism = yes
			NOT = { has_government = n_socialism }
		}

		remove_trigger = {
			has_government = n_socialism
		}

		fire_only_once = yes

		cost = 75

		complete_effect = {
			set_country_flag = open_up_political_discourse_socialist
		}

		ai_will_do = {
			factor = 1
		}
	}

	discredit_government_n_socialism = {

		icon = generic_political_discourse

		available = {
			fascism < 0.8
			democratic < 0.8
			n_socialism < 0.8
			neutrality < 0.8
			#MODDEDv
			n_socialism < 0.8
			#MODDED^
			has_idea_with_trait = socialist_idealist
		}

		visible = {
			has_country_flag = open_up_political_discourse_socialist
			check_has_focus_tree_to_switch_to_n_socialism = yes
			NOT = { has_government = n_socialism }
		}

		remove_trigger = {
			has_government = n_socialism
		}

		fire_only_once = yes

		cost = 50

		complete_effect = {
			add_stability = -0.010
			if = {
				limit = {
					has_government = fascism
				}
				add_popularity = {
					ideology = fascism
					popularity = -0.1
				}
			}
			if = {
				limit = {
					has_government = democratic
				}
				add_popularity = {
					ideology = democratic
					popularity = -0.1
				}
			}
			if = {
				limit = {
					has_government = neutrality
				}
				add_popularity = {
					ideology = neutrality
					popularity = -0.1
				}
			}
			#MODDEDv
			if = {
				limit = {
					has_government = communism
				}
				add_popularity = {
					ideology = communism
					popularity = -0.1
				}
			}
			#MODDED^
		}

		ai_will_do = {
			factor = 1
		}
	}

	hold_the_socialist_national_referendum = {

		icon = generic_political_discourse

		available = {
			n_socialism > 0.5
		}

		visible = {
			NOT = { has_government = n_socialism }
			check_has_focus_tree_to_switch_to_n_socialism = yes
			has_country_flag = preparation_for_socialist_civil_war
		}

		remove_trigger = {
			has_government = n_socialism
		}

		fire_only_once = yes

		cost = 100

		complete_effect = {
			country_event = { id = political.19 }
		}

		ai_will_do = {
			factor = 210
			modifier = {
				n_socialism > 0.6
				factor = 10
			}
		}
	}
}

liangguang_incident = {

	CHI_liangguang_incident = {
		icon = GFX_decision_category_military_operation

		available = {
			CHI = {
				owns_state = 598
			}
			OR = {
				has_government = democratic
				has_government = neutrality
			}
			has_completed_focus = CHI_opposition
			tag = GXC
		}

		visible = {
			has_completed_focus = CHI_opposition
			tag = GXC
		}
		cost = 20
		days_remove = 15
		fire_only_once = yes
		ai_will_do = {
			factor = 2000
		}
		remove_effect = {
			country_event = { id = gxc.1 }
		}
	}
}





###PUPPETS FORMING
japan_form_CHI_puppets = {

	###CCP
	JAP_form_CCP_mission = { #great way
		icon = generic_form_nation
		available = { #objective
			has_global_flag = ccp_exists
		}

		days_mission_timeout = 180
		fire_only_once = yes
		is_good = no
		activation = {
			independent_war_china_or_china_died = yes
			613 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
		}
		complete_effect = {
			add_political_power = 50
		}
		timeout_effect = {
			add_stability = -0.1 #naughty
		}
	}
	JAP_form_CCP = {
		icon = generic_form_nation

		available = {
			independent_war_china_or_china_died = yes
			613 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
		}
		visible = {
			independent_war_china_or_china_died = yes
			NOT = {
				has_global_flag = ccp_exists
			}
		}
		fire_only_once = yes
		cost = 50
		days_remove = 25
		remove_effect = {
			add_stability = 0.03
			CCP_CREATION = yes
		}
		ai_will_do = {
			factor = 100
		}
	}

	###RFM
	JAP_form_RFM_mission = {
		icon = generic_form_nation

		available = { #objective
			has_global_flag = rfm_exists
		}
		days_mission_timeout = 180
		fire_only_once = yes
		is_good = no
		activation = {
			independent_war_china_or_china_died = yes
			has_global_flag = ccp_exists
			598 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
		}
		complete_effect = {
			add_political_power = 50
		}
		timeout_effect = {
			add_stability = -0.1 #naughty
		}
	}
	JAP_form_RFM = {
		icon = generic_form_nation

		available = {
			independent_war_china_or_china_died = yes
			598 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
		}
		visible = {
			independent_war_china_or_china_died = yes
			has_global_flag = ccp_exists
			NOT = {
				has_global_flag = rfm_exists
			}
		}
		fire_only_once = yes
		cost = 50
		days_remove = 25
		remove_effect = {
			add_stability = 0.03
			RFM_CREATION = yes
		}
		ai_will_do = {
			factor = 100
		}
	}

	###JNC
	JAP_form_JNC_mission = {
		icon = generic_form_nation

		available = { #objective
			has_global_flag = jnc_exists
		}
		days_mission_timeout = 180
		fire_only_once = yes
		is_good = no
		activation = {
			independent_war_china_or_china_died = yes
			598 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
		}
		complete_effect = {
			add_political_power = 50
		}
		timeout_effect = {
			add_stability = -0.1 #naughty
		}

	}
	JAP_form_JNC = {
		icon = generic_form_nation
		target_trigger = {

		}
		available = {
			independent_war_china_or_china_died = yes
			608 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
		}
		visible = {
			independent_war_china_or_china_died = yes
			NOT = {
				has_global_flag = jnc_exists
			}
		}
		fire_only_once = yes
		cost = 50
		days_remove = 25
		complete_effect = {
			JNC_DETERMINE = yes
		}
		remove_effect = {
			add_stability = 0.03
			hidden_effect = {
				####CREATE
				if = {
					limit = {
						any_country = {
							has_country_flag = im_jnc_now
							is_subject_of = JAP
						}
					}
					random_other_country = {
						limit = {
							has_country_flag = im_jnc_now
							is_subject_of = JAP
						}
						JNC_CREATION = yes
					}
					else = {
						set_global_flag = jnc_exists
					}
				}
			}
			effect_tooltip = {
				JNC = {
					add_state_core = 614
					add_state_core = 615
					add_state_core = 767
					add_state_core = 608
					add_state_core = 609
					add_state_core = 597
					add_state_core = 766
					add_state_core = 607
				}
			}
			custom_effect_tooltip = EHB_reform
			custom_effect_tooltip = JNC_prov_focus
		}
		ai_will_do = {
			factor = 2000
		}
	}

	###RRC
	JAP_form_RRC_mission = {
		icon = generic_form_nation

		available = { #objective
			has_global_flag = rrc_exists
		}
		days_mission_timeout = 280
		fire_only_once = yes
		is_good = no
		activation = {
			independent_war_china_or_china_died = yes
			598 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			606 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			596 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			597 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			766 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			613 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			has_global_flag = jnc_exists
			has_global_flag = rfm_exists
			has_global_flag = mej_exists
		}
		complete_effect = {
			add_political_power = 50
		}
		timeout_effect = {
			add_stability = -0.1 #naughty
		}
	}
	JAP_form_RRC = {
		icon = generic_form_nation

		available = {
			independent_war_china_or_china_died = yes
			598 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			606 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			596 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			597 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			766 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			613 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
		}
		visible = {
			independent_war_china_or_china_died = yes
			has_global_flag = jnc_exists
			has_global_flag = rfm_exists
			has_global_flag = mej_exists
			NOT = {
				has_global_flag = rrc_exists
			}
		}
		fire_only_once = yes
		cost = 100
		days_remove = 60
		complete_effect = {
			RRC_PREP = yes
		}
		remove_effect = {
			hidden_effect = {
				news_event = {
					id = efm_news.1013
				}
			}
			add_political_power = 100
			add_stability = 0.05
			hidden_effect = {
				random_other_country = {
					###DETERMINE
					limit = {
						OR = {
							TAG = CCP
							TAG = RFM
							TAG = EHB
							TAG = HPC
						}
						OR = {
							NOT = {
								any_other_country = {
									OR = {
										TAG = CCP
										TAG = RFM
										TAG = EHB
										TAG = HPC
									}
								}
							}
							AND = {
								has_country_flag = im_jnc_now
								is_ai = no
								RFM = {
									is_ai = no
								}
							}
							AND = {
								has_country_flag = im_jnc_now
								is_ai = yes
								RFM = {
									is_ai = yes
								}
							}
							AND = {
								is_ai = no
								NOT = {
									any_other_country = {
										OR = {
											#TAG = CCP
											TAG = RFM
											TAG = EHB
											TAG = HPC
										}
										is_subject_of = JAP
										is_ai = no
									}
								}
							}
						}
					}
					RRC_CREATION = yes
				}
				####TELL ECA
				ECA = { country_event = { hours = 3 id = rcmjapan.736 } }
			}
			custom_effect_tooltip = RRC_annex
		}
		ai_will_do = {
			factor = 2000
		}
	}
}

japan_form_IN_MON_puppets = {
	#INNER MONG
	###RFM
	JAP_form_MEN = {
		icon = generic_form_nation

		available = {
			is_puppet = no
			ECA = {
				controls_state = 757
			}
			country_exists = PLM
		}
		visible = {
			is_puppet = no
			ECA = {
				controls_state = 757
			}
			country_exists = PLM
		}
		fire_only_once = yes
		cost = 20
		days_remove = 50
		remove_effect = {
			PLM = {
				country_event = {
					days = 2 id = rcmjapan.83
				}
			}
			custom_effect_tooltip = blank_line
			custom_effect_tooltip = if_they_accept_red
			custom_effect_tooltip = merge_eca_plm_tt
			effect_tooltip = {
				MEN = {
					add_state_core = 612
					add_state_core = 621
					add_state_core = 763
					add_state_core = 330
				}
			}
			custom_effect_tooltip = if_they_refuse_red
			effect_tooltip = {
				ECA = {
					add_state_core = 612
					add_state_core = 621
					add_state_core = 763
					add_state_core = 330
				}
			}
		}
		ai_will_do = {
			factor = 2000
		}
	}

	JAP_form_MUA_mission = {
		icon = generic_form_nation

		available = { #objective
			has_global_flag = mua_exists
		}
		days_mission_timeout = 180
		fire_only_once = yes
		is_good = no
		activation = {
			independent_war_china_or_china_died = yes
			757 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			612 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			611 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
		}
		complete_effect = {
			add_political_power = 50
		}
		timeout_effect = {
			add_stability = -0.1 #naughty
		}
	}
	JAP_form_MUA = {
		icon = generic_form_nation

		available = {
			independent_war_china_or_china_died = yes
			757 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			612 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			611 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
		}
		visible = {
			independent_war_china_or_china_died = yes
			NOT = {
				has_global_flag = mua_exists
			}
		}
		fire_only_once = yes
		cost = 20
		complete_effect = {
			effect_tooltip = {
				MEN = {
					country_event = {
						days = 2 id = rcmjapan.88
					}
				}
			}
			custom_effect_tooltip = blank_line
			custom_effect_tooltip = MUA_reform
			effect_tooltip = {
				MUA = {
					add_political_power = 100
				}
			}
			hidden_effect = {
				ECA = {
					country_event = {
						days = 2 id = rcmjapan.88
					}
				}
			}
		}
		ai_will_do = {
			factor = 2000
		}
	}

	###MEJ
	JAP_form_MEJ_mission = {
		icon = generic_form_nation
		available = { #objective
			has_global_flag = mej_exists
		}
		days_mission_timeout = 180
		fire_only_once = yes
		is_good = no
		activation = {
			independent_war_china_or_china_died = yes
			757 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			612 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			611 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			802 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			763 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			OR = {
				has_global_flag = nsg_no_puppet
				country_exists = NSG
			}
			OR = {
				has_global_flag = scg_no_puppet
				country_exists = SCG
			}
		}
		complete_effect = {
			add_political_power = 50
		}
		timeout_effect = {
			add_stability = -0.1 #naughty
		}
	}
	JAP_form_MEJ = {
		icon = generic_form_nation
		available = {
			independent_war_china_or_china_died = yes
			757 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			612 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			611 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			802 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
			763 = {
				is_controlled_by_jap_or_its_puppet = yes
			}
		}
		visible = {
			independent_war_china_or_china_died = yes
			NOT = {
				has_global_flag = mej_exists
			}
		}
		fire_only_once = yes
		cost = 50
		days_remove = 25
		remove_effect = {
			hidden_effect = {
				ECA = {
					country_event = {
						id = rcmjapan.90
					}
					add_state_core = 612
					add_state_core = 611
					add_state_core = 621
					add_state_core = 763
					add_state_core = 802
					add_state_core = 330
				}
			}
			add_stability = 0.03
			effect_tooltip = {
				MUA = {
					country_event = {
						id = rcmjapan.90
					}
				}
			}
			custom_effect_tooltip = MEN_reform
			effect_tooltip = {
				MEJ = {
					add_state_core = 612
					add_state_core = 611
					add_state_core = 621
					add_state_core = 763
					add_state_core = 802
					add_state_core = 330
				}
			}
		}
		ai_will_do = {
			factor = 2000
		}
	}

}
political_actions = {
	lushan_declaration = {
		icon = generic_political_discourse
		fire_only_once = yes
		days_remove = 15 # Stays for 5 days before being removed
		#days_re_enable = 5 # Will show up in the interface and can be selected again after 5 days
		cost = 15
		#war_with_target_on_remove = no #will give warning (not yet tested)
		#highlight_states = { #These states will be highlighted
			#     state =
			#}
		visible = { #can see
			tag = CHI
			NOT = {
				has_completed_focus = CHI_lushan_focus
			}
			NOT = {
				has_country_flag = Im_doing_CHI_lushan_focus
			}
		}
		available = { #can do
			has_defensive_war_with = JAP
		}
		complete_effect = { #run effect on selection
			effect_tooltip = {
				remove_ideas = appeasement_policy
			}
			hidden_effect = {
				remove_ideas = appeasement_policy
				remove_ideas = appeasement_policy_0
				remove_ideas = appeasement_policy_2
			}
		}
		remove_trigger = { #will run remove effect and abort

		}
		remove_effect = { #run effect when removed/finished
			unlock_national_focus = CHI_lushan_focus
			if = {
				limit = {
					has_country_leader = {
						ruling_only = yes
						name = "Chiang Kai-shek"
					}
				}
				add_country_leader_trait = generallissimo
			}
			hidden_effect = {
				news_event = {
					id = news.2017
				}
				if = {
					limit = {
						is_ai = yes
					}
					remove_ideas = idea_gongxian_arsenal
				}
			}
		}
		cancel_trigger = { #will abort

		}
		modifier = { #active during the course of the decision

		}
		ai_will_do = {
			factor = 200
		}
	}
}
foreign_politics = {
	opposition_clashes_with_CHI = {
		icon = generic_ignite_civil_war
		cost = 10
		days_re_enable = 50
		target_trigger = {
			FROM = {
				is_warlord = yes
				is_faction_leader = yes
				has_war_with = event_target:WTT_current_china_leader
			}
		}
		visible = { #can see
			OR = {
				is_originally_warlord = yes
				tag = PRC
				tag = CHI
			}
			any_country = {
				has_war_with = event_target:WTT_current_china_leader
				is_originally_warlord = yes
				is_faction_leader = yes
			}
			NOT = {
				OR = {
					is_in_faction = yes
					has_war_with = event_target:WTT_current_china_leader
					tag = event_target:WTT_current_china_leader
				}
			}
		}
		available = { #can do
			OR = {
				is_puppet = no
				is_subject_of = event_target:WTT_current_china_leader
			}
		}
		complete_effect = { #run effect on selection
			FROM = {
				save_global_event_target_as = scp_war_opposition_leader
			}
			if = {
				limit = {
					FROM = {
						tag = GXC
					}
				}
				country_event = {
					id = prc.1
				}
				else = {
					country_event = {
						id = rcmchina.358
					}
				}
			}
		}
		ai_will_do = {
			factor = 2000
		}
	}
}
recovery_effort = {
	recover_from_the_long_march = {
		icon = generic_nationalism
		fire_only_once = no
		days_remove = 85 # Stays for 5 days before being removed
		days_re_enable = 35 # Will show up in the interface and can be selected again after 5 days
		cost = 50
		highlight_states = { #These states will be highlighted

		}
		visible = { #can see
			tag = PRC
			has_completed_focus = PRC_Red_Army_Recovery
			has_long_march_idea = yes
		}
		available = { #can do
			if = {
				limit = {
					has_idea = Long_March_1
				}
				has_stability > 0.1
			}
			else_if = {
				limit = {
					has_idea = Long_March_2
				}
				has_stability > 0.2
			}
			else_if = {
				limit = {
					has_idea = Long_March_3
				}
				has_stability > 0.3
			}
			else_if = {
				limit = {
					has_idea = Long_March_4
				}
				has_stability > 0.4
			}
			else_if = {
				limit = {
					has_idea = Long_March_5
				}
				has_stability > 0.5
			}
		}
		#complete_effect = { #run effect on selection

			#}
		remove_trigger = { #will run remove effect and abort
			if = {
				limit = {
					has_idea = Long_March_1
				}
				has_stability < 0.1
			}
			else_if = {
				limit = {
					has_idea = Long_March_2
				}
				has_stability < 0.2
			}
			else_if = {
				limit = {
					has_idea = Long_March_3
				}
				has_stability < 0.3
			}
			else_if = {
				limit = {
					has_idea = Long_March_4
				}
				has_stability < 0.4
			}
			else_if = {
				limit = {
					has_idea = Long_March_5
				}
				has_stability < 0.5
			}

		}
		remove_effect = { #run effect when removed/finished
			if = {
				limit = {
					if = {
						limit = {
							has_idea = Long_March_1
						}
						has_stability < 0.1
					}
					else_if = {
						limit = {
							has_idea = Long_March_2
						}
						has_stability < 0.2
					}
					else_if = {
						limit = {
							has_idea = Long_March_3
						}
						has_stability < 0.3
					}
					else_if = {
						limit = {
							has_idea = Long_March_4
						}
						has_stability < 0.4
					}
					else_if = {
						limit = {
							has_idea = Long_March_5
						}
						has_stability < 0.5
					}
				}
				long_march_up = yes
				else = {
					long_march_down = yes
				}
			}
			custom_effect_tooltip = separate_line_tt
			custom_effect_tooltip = recovery_reversed_tt
		}
		cancel_trigger = { #will abort

		}
		modifier = { #active during the course of the decision
			political_power_gain = -0.5
			stability_weekly = 0.005
			war_support_weekly = 0.005
		}
		ai_will_do = {
			factor = 2000
		}
	}
}
national_infra_decision = {
	northeast_infra_effort = {
		icon = generic_construction
		fire_only_once = no
		days_remove = duration_of_infra # Stays for 5 days before being removed
		days_re_enable = duration_of_infra_reenable # Will show up in the interface and can be selected again after 5 days
		cost = 50
		visible = { #can see
			has_country_flag = infra_effort_flag
		}
		available = { #can do
			any_state = {
				is_owned_by = ROOT
				custom_trigger_tooltip = {
					tooltip = is_in_strat_144
					region = 144
				}
			}
			num_of_civilian_factories_available_for_projects > 6
		}
		remove_effect = { #run effect when removed/finished
			every_owned_state = {
				limit = {
					custom_trigger_tooltip = {
						tooltip = is_in_strat_144
						region = 144
					}
					infrastructure < 10
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			reenable_duration = yes
		}
		cancel_trigger = { #will abort
			custom_trigger_tooltip = {
				tooltip = does_not_meet_pre
				NOT = {
					any_state = {
						is_owned_by = ROOT
						custom_trigger_tooltip = {
							tooltip = is_in_strat_144
							region = 144
						}
					}
				}
			}
		}
		modifier = { #active during the course of the decision
			civilian_factory_use = 7
		}
		ai_will_do = {
			factor = 10
		}
	}
	north_china_infra_effort = {
		icon = generic_construction
		fire_only_once = no
		days_remove = duration_of_infra # Stays for 5 days before being removed
		days_re_enable = duration_of_infra_reenable # Will show up in the interface and can be selected again after 5 days
		cost = 50
		visible = { #can see
			has_country_flag = infra_effort_flag
		}
		available = { #can do
			any_state = {
				is_owned_by = ROOT
				custom_trigger_tooltip = {
					tooltip = is_in_strat_143
					region = 143
				}
			}
			num_of_civilian_factories_available_for_projects > 6
		}
		remove_effect = { #run effect when removed/finished
			every_owned_state = {
				limit = {
					custom_trigger_tooltip = {
						tooltip = is_in_strat_143
						region = 143
					}
					infrastructure < 10
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			reenable_duration = yes
		}
		cancel_trigger = { #will abort
			custom_trigger_tooltip = {
				tooltip = does_not_meet_pre
				NOT = {
					any_state = {
						is_owned_by = ROOT
						custom_trigger_tooltip = {
							tooltip = is_in_strat_143
							region = 143
						}
					}
				}
			}
		}
		modifier = { #active during the course of the decision
			civilian_factory_use = 7
		}
		ai_will_do = {
			factor = 10
		}
	}
	central_china_infra_effort = {
		icon = generic_construction
		fire_only_once = no
		days_remove = duration_of_infra # Stays for 5 days before being removed
		days_re_enable = duration_of_infra_reenable # Will show up in the interface and can be selected again after 5 days
		cost = 50

		visible = { #can see
			has_country_flag = infra_effort_flag
		}
		available = { #can do
			any_state = {
				is_owned_by = ROOT

				custom_trigger_tooltip = {
					tooltip = is_in_strat_164
					region = 164
				}
			}
			num_of_civilian_factories_available_for_projects > 6
		}
		remove_effect = { #run effect when removed/finished
			every_owned_state = {
				limit = {
					custom_trigger_tooltip = {
						tooltip = is_in_strat_164
						region = 164
					}
					infrastructure < 10
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			reenable_duration = yes
		}
		cancel_trigger = { #will abort
			custom_trigger_tooltip = {
				tooltip = does_not_meet_pre
				NOT = {
					any_state = {
						is_owned_by = ROOT
						custom_trigger_tooltip = {
							tooltip = is_in_strat_164
							region = 164
						}
					}
				}
			}
		}
		modifier = { #active during the course of the decision
			civilian_factory_use = 7
		}
		ai_will_do = {
			factor = 10
		}
	}
	south_china_infra_effort = {
		icon = generic_construction
		fire_only_once = no
		days_remove = duration_of_infra # Stays for 5 days before being removed
		days_re_enable = duration_of_infra_reenable # Will show up in the interface and can be selected again after 5 days
		cost = 50

		visible = { #can see
			has_country_flag = infra_effort_flag
		}
		available = { #can do
			any_state = {
				is_owned_by = ROOT
				custom_trigger_tooltip = {
					tooltip = is_in_strat_165
					region = 165
				}
			}
			num_of_civilian_factories_available_for_projects > 6
		}
		remove_effect = { #run effect when removed/finished
			every_owned_state = {
				limit = {
					custom_trigger_tooltip = {
						tooltip = is_in_strat_165
						region = 165
					}
					infrastructure < 10
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			reenable_duration = yes
		}
		cancel_trigger = { #will abort
			custom_trigger_tooltip = {
				tooltip = does_not_meet_pre
				NOT = {
					any_state = {
						is_owned_by = ROOT
						custom_trigger_tooltip = {
							tooltip = is_in_strat_165
							region = 165
						}
					}
				}
			}
		}
		modifier = { #active during the course of the decision
			civilian_factory_use = 7
		}
		ai_will_do = {
			factor = 10
		}
	}
	west_china_infra_effort = {
		icon = generic_construction
		fire_only_once = no
		days_remove = duration_of_infra # Stays for 5 days before being removed
		days_re_enable = duration_of_infra_reenable # Will show up in the interface and can be selected again after 5 days
		cost = 50

		visible = { #can see
			has_country_flag = infra_effort_flag
		}
		available = { #can do
			any_state = {
				is_owned_by = ROOT
				custom_trigger_tooltip = {
					tooltip = is_in_strat_200
					region = 200
				}
			}
			num_of_civilian_factories_available_for_projects > 6
		}
		remove_effect = { #run effect when removed/finished
			every_owned_state = {
				limit = {
					custom_trigger_tooltip = {
						tooltip = is_in_strat_200
						region = 200
					}
					infrastructure < 10
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			reenable_duration = yes
		}
		cancel_trigger = { #will abort
			custom_trigger_tooltip = {
				tooltip = does_not_meet_pre
				NOT = {
					any_state = {
						is_owned_by = ROOT
						custom_trigger_tooltip = {
							tooltip = is_in_strat_200
							region = 200
						}
					}
				}
			}
		}
		modifier = { #active during the course of the decision
			civilian_factory_use = 7
		}
		ai_will_do = {
			factor = 10
		}
	}
	sinkiang_region_infra_effort = {
		icon = generic_construction
		fire_only_once = no
		days_remove = duration_of_infra # Stays for 5 days before being removed
		days_re_enable = duration_of_infra_reenable # Will show up in the interface and can be selected again after 5 days
		cost = 50

		visible = { #can see
			has_country_flag = infra_effort_flag
		}
		available = { #can do
			any_state = {
				is_owned_by = ROOT
				custom_trigger_tooltip = {
					tooltip = is_in_strat_145
					region = 145
				}
			}
			num_of_civilian_factories_available_for_projects > 6
		}
		remove_effect = { #run effect when removed/finished
			every_owned_state = {
				limit = {
					custom_trigger_tooltip = {
						tooltip = is_in_strat_145
						region = 145
					}
					infrastructure < 10
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			reenable_duration = yes
		}
		cancel_trigger = { #will abort
			custom_trigger_tooltip = {
				tooltip = does_not_meet_pre
				NOT = {
					any_state = {
						is_owned_by = ROOT
						custom_trigger_tooltip = {
							tooltip = is_in_strat_145
							region = 145
						}
					}
				}
			}
		}
		modifier = { #active during the course of the decision
			civilian_factory_use = 7
		}
		ai_will_do = {
			factor = 10
		}
	}
	tibet_region_infra_effort = {
		icon = generic_construction
		fire_only_once = no
		days_remove = duration_of_infra # Stays for 5 days before being removed
		days_re_enable = duration_of_infra_reenable # Will show up in the interface and can be selected again after 5 days
		cost = 50

		visible = { #can see
			has_country_flag = infra_effort_flag
		}
		available = { #can do
			any_state = {
				is_owned_by = ROOT
				custom_trigger_tooltip = {
					tooltip = is_in_strat_146
					region = 146
				}
			}
			num_of_civilian_factories_available_for_projects > 6
		}
		remove_effect = { #run effect when removed/finished
			every_owned_state = {
				limit = {
					custom_trigger_tooltip = {
						tooltip = is_in_strat_146
						region = 146
					}
					infrastructure < 10
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			reenable_duration = yes
		}
		cancel_trigger = { #will abort
			custom_trigger_tooltip = {
				tooltip = does_not_meet_pre
				NOT = {
					any_state = {
						is_owned_by = ROOT
						custom_trigger_tooltip = {
							tooltip = is_in_strat_146
							region = 146
						}
					}
				}
			}
		}
		modifier = { #active during the course of the decision
			civilian_factory_use = 7
		}
		ai_will_do = {
			factor = 10
		}
	}
	mongol_region_infra_effort = {
		icon = generic_construction
		fire_only_once = no
		days_remove = duration_of_infra # Stays for 5 days before being removed
		days_re_enable = duration_of_infra_reenable # Will show up in the interface and can be selected again after 5 days
		cost = 50

		visible = { #can see
			has_country_flag = infra_effort_flag
		}
		available = { #can do
			any_state = {
				is_owned_by = ROOT
				custom_trigger_tooltip = {
					tooltip = is_in_strat_152
					region = 152
				}
			}
			num_of_civilian_factories_available_for_projects > 6
		}
		remove_effect = { #run effect when removed/finished
			every_owned_state = {
				limit = {
					custom_trigger_tooltip = {
						tooltip = is_in_strat_152
						region = 152
					}
					infrastructure < 10
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			reenable_duration = yes
		}
		cancel_trigger = { #will abort
			custom_trigger_tooltip = {
				tooltip = does_not_meet_pre
				NOT = {
					any_state = {
						is_owned_by = ROOT
						custom_trigger_tooltip = {
							tooltip = is_in_strat_152
							region = 152
						}
					}
				}
			}
		}
		modifier = { #active during the course of the decision
			civilian_factory_use = 7
		}
		ai_will_do = {
			factor = 10
		}
	}
}
economy_decisions = {
	monetary_reform_decision = {
		icon = generic_economy
		fire_only_once = no
		days_remove = 120 # Stays for 5 days before being removed
		days_re_enable = 0 # Will show up in the interface and can be selected again after 5 days
		cost = 25
		highlight_states = { #These states will be highlighted

		}
		visible = { #can see
			has_idea = unstable_economy
			OR = {
				has_completed_focus = CHI_monetary_reform
				has_completed_focus = WRL_monetary_reform
			}
		}
		available = { #can do
			has_idea = unstable_economy
		}
		complete_effect = { #run effect on selection
			swap_ideas = {
				remove_idea = unstable_economy
				add_idea = civilian_economy
			}
		}
		remove_trigger = { #will run remove effect and abort

		}
		remove_effect = { #run effect when removed/finished

		}
		cancel_trigger = { #will abort

		}
		modifier = { #active during the course of the decision
			consumer_goods_factor = 0.05
		}
		ai_will_do = {
			factor = 2000
		}
	}
}
RCM_communist_infiltration = {
	send_in_the_partisans = {
		icon = infiltrate_state
		fire_only_once = no
		cost = 50
		days_remove = 70 # Stays for 5 days before being removed
		days_re_enable = 5 # Will show up in the interface and can be selected again after 5 days
		cost = 75
		highlight_states = { #These states will be highlighted

		}
		visible = { #can see
			tag = PRC
			has_country_flag = communist_infiltration
			any_state = {
				owner = {
					NOT = {
						tag = ROOT
					}
				}
				is_north_china_state_for_liberation = yes
				any_neighbor_state = {
					OR = {
						has_state_flag = commie_ridden_states
						owner = {
							tag = ROOT
						}
					}
				}
				NOT = {
					has_state_flag = commie_ridden_states
				}
			}
		}
		available = { #can do
			has_equipment = {
				infantry_equipment > 99
			}
			has_manpower > 2000
		}
		complete_effect = { #run effect on selection

		}
		remove_trigger = { #will run remove effect and abort

		}
		remove_effect = { #run effect when removed/finished
			every_state = {
				limit = {
					is_north_china_state_for_liberation = yes
					any_neighbor_state = {
						OR = {
							has_state_flag = commie_ridden_states
							owner = {
								tag = ROOT
							}
						}
					}
					NOT = {
						has_state_flag = commie_ridden_states
					}
				}
				custom_effect_tooltip = commie_ridden_states_start_tt
				hidden_effect = {
					set_border_war = yes
					set_state_flag = commie_ridden_states
				}

			}
			ROOT = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -100
				}
				add_manpower = -2000
			}
		}
		cancel_trigger = { #will abort

		}
		modifier = { #active during the course of the decision
			political_power_gain = -0.25
		}
		ai_will_do = {
			factor = 100
		}
	}
	contact_the_partisans = {
		icon = infiltrate_state
		fire_only_once = no
		days_remove = 50 # Stays for 5 days before being removed
		days_re_enable = 5 # Will show up in the interface and can be selected again after 5 days
		cost = 50
		highlight_states = { #These states will be highlighted

		}
		visible = { #can see
			tag = PRC
			608 = {
				OR = {
					is_owned_by = ROOT
					has_state_flag = commie_ridden_states
				}
			}
			has_country_flag = communist_infiltration
			any_state = {
				owner = {
					NOT = {
						tag = ROOT
					}
				}
				is_MAN_state_for_liberation = yes
				any_neighbor_state = {
					OR = {
						has_state_flag = commie_ridden_states
						owner = {
							tag = ROOT
						}
					}
				}
				NOT = {
					has_state_flag = commie_ridden_states
				}
			}

		}
		available = { #can do
			608 = {
				OR = {
					is_owned_by = ROOT
					has_state_flag = commie_ridden_states
				}
			}
			has_equipment = {
				infantry_equipment > 49
			}
			has_manpower > 200
		}
		complete_effect = { #run effect on selection

		}
		remove_trigger = { #will run remove effect and abort

		}
		remove_effect = { #run effect when removed/finished
			every_state = {
				limit = {
					is_MAN_state_for_liberation = yes
					any_neighbor_state = {
						OR = {
							has_state_flag = commie_ridden_states
							owner = {
								tag = ROOT
							}
						}
					}
					NOT = {
						has_state_flag = commie_ridden_states
					}
				}
				custom_effect_tooltip = commie_ridden_states_start_tt
				hidden_effect = {
					set_border_war = yes
					set_state_flag = commie_ridden_states
				}
			}
			ROOT = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -50
				}
				add_manpower = -200
			}
		}
		cancel_trigger = { #will abort

		}
		modifier = { #active during the course of the decision
			political_power_gain = -0.25
		}
		ai_will_do = {
			factor = 100
		}
	}
	prepared_for_operation_decision = {
		icon = generic_political_discourse
		fire_only_once = no
		days_remove = 40 # Stays for 5 days before being removed
		days_re_enable = 0 # Will show up in the interface and can be selected again after 5 days
		cost = 50
		highlight_states = { #These states will be highlighted

		}
		visible = { #can see
			tag = PRC
			has_country_flag = communist_infiltration

		}
		available = { #can do
			has_war_with = JAP
			event_target:WTT_current_china_leader = {
				has_war_with = JAP
			}
			NOT = {
				has_idea = prepared_for_operation
			}
		}
		complete_effect = { #run effect on selection

		}
		remove_trigger = { #will run remove effect and abort

		}
		remove_effect = { #run effect when removed/finished
			hidden_effect = {
				add_ideas = prepared_for_operation
			}
			custom_effect_tooltip = prepared_for_operation_tt
		}
		cancel_trigger = { #will abort

		}
		modifier = { #active during the course of the decision
			political_power_gain = -0.1
		}
		ai_will_do = {
			factor = 200
		}
	}


}
RCM_communist_crackdown = {
	RCM_communist_crackdown_decison = {
		icon = generic_political_discourse
		fire_only_once = no
		days_remove = 70 # Stays for 5 days before being removed
		days_re_enable = 25 # Will show up in the interface and can be selected again after 5 days
		cost = 50

		available = { #can do
			any_state = {
			    is_controlled_by = ROOT
			    has_state_flag = commie_ridden_states
			    #set_temp_variable = { communist_crackdown_temp = id }
			}
		}
		visible = { #can see
			PRC = {
				has_government = communism
			}
			NOT = {
				has_government = communism
			}
			any_state = {
			    is_controlled_by = ROOT
			    has_state_flag = commie_ridden_states
		    	}
		}


		complete_effect = { #run effect on selection

		}
		highlight_states = { #These states will be highlighted
			#state = var:communist_crackdown_temp
		}
		remove_trigger = { #will run remove effect and abort

		}
		remove_effect = { #run effect when removed/finished
			random_state = {
				limit = { #can do
					is_controlled_by = ROOT
					has_state_flag = commie_ridden_states
					#state = var:communist_crackdown_temp
				}
				state_event = RCM_communist_uprising.3
				clr_state_flag = commie_ridden_states
				set_border_war = no
			}
		}
		cancel_trigger = { #will abort

		}
		modifier = { #active during the course of the decision
			political_power_gain = -0.1
		}
		ai_will_do = {
			factor = 50
		}
	}
}
